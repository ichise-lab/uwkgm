#!/bin/bash

source bin/libs/args
source bin/libs/inputs
source packages/mysql/bin/run
source packages/mysql/bin/setup
source packages/mysql/bin/install

packages.mysql.manage() {
    rm -r -f packages/mysql/temp

    while true;
    do
        CHOICES=(
            "Run"
            "Install"
            "Set up UWKGM database"
        )

        VALUES=(
            run
            install
            setup
        )

        echo "[UWKGM: INFO] MySQL Manager for MySQL version $UWKGM_PKG_MYSQL_VERSION"

        args.pull OPERATION
        inputs.choices OPERATION "MySQL Operation" "Choose operation for MySQL" "run" "$OPERATION" "${CHOICES[@]}" "${VALUES[@]}"

        if [[ $OPERATION == "run" ]]; then
            packages.mysql.run
        elif [[ $OPERATION == "install" ]]; then
            packages.mysql.install
        elif [[ $OPERATION == "setup" ]]; then
            packages.mysql.setup
        elif [[ $OPERATION == "cancel" ]]; then
            rm -r -f packages/mysql/temp
            return
        fi
    done
}