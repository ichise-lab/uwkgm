#!/bin/bash

source bin/conf
source bin/libs/args
source bin/libs/inputs
source conf/databases

packages.virtuoso.run() {
    while true;
    do
        CHOICES=(
            "Docker"
        )

        VALUES=(
            docker
        )

        args.pull RUN
        inputs.choices RUN "Run Virtuoso" "Choose running method" "docker" "$RUN" "${CHOICES[@]}" "${VALUES[@]}"

        if [[ $RUN == "docker" ]]; then
            packages.virtuoso.run.docker
        elif [[ $RUN == "cancel" ]]; then
            return
        fi
    done
}

packages.virtuoso.run.docker() {
    sudo docker run \
        --name uwkgm-virtuoso \
        -p "8890:$UWKGM_DB_GRAPHS_PORT" -p 1111:1111 \
        -e SPARQL_UPDATE=true \
        -e DEFAULT_GRAPH=http://dbpedia.org/ \
        -v "$UWKGM_DB_GRAPHS_HOST_PATH:/data" \
        -d tenforce/virtuoso
    
    echo ""
    echo "[UWKGM: INFO] Executed Docker's run command"
    echo ""
}